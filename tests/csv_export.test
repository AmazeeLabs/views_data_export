<?php

class CSVExportViewsDataExportTests extends ViewsDataExportSimpleExportTest {

  protected $profile = 'testing';

  public static function getInfo() {
    return array(
      'name' => 'CSV Export',
      'description' => 'Various tests for exporting to CSV.',
      'group' => 'Views Data Export',
    );
  }

  protected $vde_export_type = 'CSV';

  protected function getExportView($path = 'vde_test') {
    // Create the basic view.
    $view = $this->getBasicExportView();

    $display = $view->new_display('views_data_export', 'Data export', 'vde_test');
    $display->override_option('style_plugin', 'views_data_export_csv');
    $display->override_option('path', $path);

    $expected = '"ID","Name","Age"
"1","John","25"
"2","George","27"
"3","Ringo","28"
"4","Paul","26"
"5","Meredith","30"';

    return array(&$view, $expected);
  }

}